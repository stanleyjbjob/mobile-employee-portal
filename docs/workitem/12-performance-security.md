# å·¥ä½œé …ç›® 12 - æ•ˆèƒ½å„ªåŒ–èˆ‡å®‰å…¨å¼·åŒ–

## ğŸ“‹ åŸºæœ¬è³‡è¨Š
- **å·¥ä½œé …ç›®ç·¨è™Ÿ**: WI-012
- **å„ªå…ˆç´š**: é«˜
- **é ä¼°å·¥ä½œé‡**: 4-5 å¤©
- **è² è²¬äººå“¡**: å…¨ç«¯å·¥ç¨‹å¸« + ç³»çµ±æ¶æ§‹å¸«
- **å‰ç½®æ¢ä»¶**: WI-011 (ç³»çµ±æ•´åˆæ¸¬è©¦å®Œæˆ)
- **éšæ®µ**: ç¬¬ä¸‰éšæ®µ (Month 8)

## ğŸ¯ å·¥ä½œç›®æ¨™
æ ¹æ“šæ¸¬è©¦çµæœé€²è¡Œç³»çµ±æ•ˆèƒ½å„ªåŒ–å’Œå®‰å…¨å¼·åŒ–ï¼Œç¢ºä¿ç³»çµ±åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ç©©å®šã€å¿«é€Ÿã€å®‰å…¨åœ°é‹è¡Œã€‚

## ğŸ“ è©³ç´°å·¥ä½œå…§å®¹

### å‰ç«¯æ•ˆèƒ½å„ªåŒ–
- [ ] **ç¨‹å¼ç¢¼åˆ†å‰² (Code Splitting)** - æŒ‰è·¯ç”±å’ŒåŠŸèƒ½åˆ†å‰²ç¨‹å¼ç¢¼
- [ ] **æ‡¶è¼‰å…¥å„ªåŒ–** - å…ƒä»¶å’Œæ¨¡çµ„æ‡¶è¼‰å…¥å¯¦ä½œ
- [ ] **æ‰“åŒ…å„ªåŒ–** - Webpack é…ç½®å„ªåŒ–
- [ ] **åœ–ç‰‡å„ªåŒ–** - åœ–ç‰‡å£“ç¸®ã€æ ¼å¼è½‰æ›ã€å»¶é²è¼‰å…¥
- [ ] **å¿«å–ç­–ç•¥** - HTTP å¿«å–ã€ç€è¦½å™¨å¿«å–å„ªåŒ–
- [ ] **CSS å„ªåŒ–** - ç§»é™¤æœªä½¿ç”¨çš„ CSSã€å£“ç¸®å„ªåŒ–
- [ ] **JavaScript å„ªåŒ–** - Tree Shakingã€ç¨‹å¼ç¢¼å£“ç¸®
- [ ] **CDN é…ç½®** - éœæ…‹è³‡æº CDN éƒ¨ç½²

### å¾Œç«¯æ•ˆèƒ½å„ªåŒ–
- [ ] **è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–** - ç´¢å¼•å„ªåŒ–ã€æŸ¥è©¢èªå¥å„ªåŒ–
- [ ] **API å›æ‡‰å„ªåŒ–** - è³‡æ–™åˆ†é ã€æ¬„ä½éæ¿¾
- [ ] **å¿«å–æ©Ÿåˆ¶å¯¦ä½œ** - Redis å¿«å–ç­–ç•¥
- [ ] **é€£ç·šæ± å„ªåŒ–** - è³‡æ–™åº«é€£ç·šæ± é…ç½®
- [ ] **éåŒæ­¥è™•ç†** - è€—æ™‚æ“ä½œéåŒæ­¥åŒ–
- [ ] **è¨˜æ†¶é«”ç®¡ç†** - è¨˜æ†¶é«”æ´©æ¼æª¢æŸ¥å’Œå„ªåŒ–
- [ ] **åƒåœ¾å›æ”¶å„ªåŒ–** - GC åƒæ•¸èª¿å„ª
- [ ] **API é™æµ** - Rate Limiting å¯¦ä½œ

### å®‰å…¨å¼·åŒ–æªæ–½
- [ ] **HTTPS å¼·åˆ¶å¯¦ä½œ** - SSL/TLS æ†‘è­‰é…ç½®
- [ ] **å®‰å…¨æ¨™é ­è¨­å®š** - HSTSã€CSPã€X-Frame-Options
- [ ] **è¼¸å…¥é©—è­‰å¼·åŒ–** - å‰å¾Œç«¯é›™é‡é©—è­‰
- [ ] **SQL æ³¨å…¥é˜²è­·** - åƒæ•¸åŒ–æŸ¥è©¢ã€è¼¸å…¥æ¸…ç†
- [ ] **XSS é˜²è­·å¼·åŒ–** - å…§å®¹å®‰å…¨æ”¿ç­–ã€è¼¸å‡ºç·¨ç¢¼
- [ ] **CSRF ä¿è­·** - Token é©—è­‰æ©Ÿåˆ¶
- [ ] **æª”æ¡ˆä¸Šå‚³å®‰å…¨** - æª”æ¡ˆé¡å‹é©—è­‰ã€ç—…æ¯’æƒæ
- [ ] **æ•æ„Ÿè³‡æ–™è™•ç†** - è³‡æ–™é®ç½©ã€åŠ å¯†å„²å­˜

### ç›£æ§å’Œæ—¥èªŒ
- [ ] **æ‡‰ç”¨ç¨‹å¼ç›£æ§** - APM å·¥å…·æ•´åˆ
- [ ] **éŒ¯èª¤è¿½è¹¤** - éŒ¯èª¤æ—¥èªŒæ”¶é›†å’Œåˆ†æ
- [ ] **æ•ˆèƒ½ç›£æ§** - å›æ‡‰æ™‚é–“ã€ååé‡ç›£æ§
- [ ] **å®‰å…¨äº‹ä»¶ç›£æ§** - ç•°å¸¸ç™»å…¥ã€æ”»æ“Šè¡Œç‚ºç›£æ§
- [ ] **ç³»çµ±è³‡æºç›£æ§** - CPUã€è¨˜æ†¶é«”ã€ç£ç¢Ÿä½¿ç”¨ç‡
- [ ] **ä½¿ç”¨è€…è¡Œç‚ºåˆ†æ** - ä½¿ç”¨è€…æ“ä½œè¿½è¹¤
- [ ] **è­¦å ±æ©Ÿåˆ¶** - ç•°å¸¸ç‹€æ³å³æ™‚é€šçŸ¥
- [ ] **æ—¥èªŒç®¡ç†** - æ—¥èªŒè¼ªè½‰ã€æ­¸æª”ç­–ç•¥

## âœ… å®Œæˆæ¨™æº–
- [ ] é é¢è¼‰å…¥æ™‚é–“æ¸›å°‘ 30% ä»¥ä¸Š
- [ ] API å›æ‡‰æ™‚é–“æ§åˆ¶åœ¨ 500ms ä»¥å…§
- [ ] è³‡æ–™åº«æŸ¥è©¢æ•ˆèƒ½æå‡ 50% ä»¥ä¸Š
- [ ] é€šéå®‰å…¨æ€§æƒææ¸¬è©¦
- [ ] æ‰€æœ‰å®‰å…¨æ¨™é ­æ­£ç¢ºè¨­å®š
- [ ] ç›£æ§ç³»çµ±æ­£å¸¸é‹ä½œ
- [ ] éŒ¯èª¤è¿½è¹¤æ©Ÿåˆ¶å®Œå–„
- [ ] ç³»çµ±è³‡æºä½¿ç”¨ç‡æœ€ä½³åŒ–
- [ ] å®‰å…¨äº‹ä»¶èƒ½å³æ™‚åµæ¸¬
- [ ] æ•ˆèƒ½ç›£æ§æŒ‡æ¨™ç©©å®š

## ğŸš€ å‰ç«¯å„ªåŒ–ç­–ç•¥

### è¼‰å…¥æ•ˆèƒ½å„ªåŒ–
#### ç¨‹å¼ç¢¼å±¤ç´šå„ªåŒ–
```typescript
// æ‡¶è¼‰å…¥è·¯ç”±æ¨¡çµ„
const routes: Routes = [
  {
    path: 'admin',
    loadChildren: () => import('./admin/admin.module').then(m => m.AdminModule)
  },
  {
    path: 'surveys',
    loadChildren: () => import('./surveys/surveys.module').then(m => m.SurveysModule)
  }
];

// å…ƒä»¶æ‡¶è¼‰å…¥
@Component({
  template: `<ng-container *ngIf="showChart">
    <app-chart [data]="chartData"></app-chart>
  </ng-container>`
})
```

#### åœ–ç‰‡å„ªåŒ–ç­–ç•¥
- **ç¾ä»£æ ¼å¼**: WebPã€AVIF æ ¼å¼å„ªå…ˆ
- **éŸ¿æ‡‰å¼åœ–ç‰‡**: ä¸åŒè¢å¹•å°ºå¯¸é©é…
- **å»¶é²è¼‰å…¥**: Intersection Observer å¯¦ä½œ
- **ä½”ä½ç¬¦**: è¼‰å…¥å‰é¡¯ç¤ºéª¨æ¶å±

### åŸ·è¡Œæ•ˆèƒ½å„ªåŒ–
#### Angular æœ€ä½³åŒ–
- **OnPush è®Šæ›´æª¢æ¸¬**: æ¸›å°‘ä¸å¿…è¦çš„æª¢æ¸¬
- **TrackBy å‡½æ•¸**: å„ªåŒ– *ngFor æ•ˆèƒ½
- **éåŒæ­¥ç®¡é“**: é¿å…é‡è¤‡è¨‚é–±
- **è¨˜æ†¶é«”æ´©æ¼é˜²è­·**: é©ç•¶å–æ¶ˆè¨‚é–±

#### è³‡æ–™è™•ç†å„ªåŒ–
- **è™›æ“¬æ»¾å‹•**: å¤§é‡è³‡æ–™åˆ—è¡¨å„ªåŒ–
- **åˆ†é è¼‰å…¥**: è³‡æ–™åˆ†æ‰¹è¼‰å…¥
- **æœå°‹å»æŠ–å‹•**: é¿å…é »ç¹ API å‘¼å«
- **å¿«å–ç­–ç•¥**: HTTP å¿«å–å’Œè¨˜æ†¶é«”å¿«å–

## ğŸ”§ å¾Œç«¯å„ªåŒ–ç­–ç•¥

### è³‡æ–™åº«æ•ˆèƒ½å„ªåŒ–
#### ç´¢å¼•å„ªåŒ–
```sql
-- è¤‡åˆç´¢å¼•å„ªåŒ–
CREATE INDEX idx_user_activity_date ON activities(user_id, created_date);
CREATE INDEX idx_announcement_category_status ON announcements(category_id, status);

-- æŸ¥è©¢å„ªåŒ–
SELECT a.*, u.name as author_name
FROM announcements a
INNER JOIN users u ON a.author_id = u.id
WHERE a.status = 'published'
ORDER BY a.created_date DESC
LIMIT 20;
```

#### æŸ¥è©¢å„ªåŒ–æŠ€å·§
- **N+1 å•é¡Œè§£æ±º**: ä½¿ç”¨ Include æˆ– Join
- **åˆ†é æŸ¥è©¢**: ä½¿ç”¨ Skip å’Œ Take
- **æŠ•å½±æŸ¥è©¢**: åªé¸å–éœ€è¦çš„æ¬„ä½
- **æ‰¹é‡æ“ä½œ**: æ¸›å°‘è³‡æ–™åº«å¾€è¿”æ¬¡æ•¸

### API æ•ˆèƒ½å„ªåŒ–
#### å›æ‡‰å„ªåŒ–
```csharp
// è³‡æ–™éæ¿¾å’ŒæŠ•å½±
public async Task<IActionResult> GetAnnouncements(
    [FromQuery] int page = 1,
    [FromQuery] int size = 20,
    [FromQuery] string category = null)
{
    var query = _context.Announcements
        .Where(a => a.Status == AnnouncementStatus.Published);
    
    if (!string.IsNullOrEmpty(category))
        query = query.Where(a => a.Category == category);
    
    var announcements = await query
        .OrderByDescending(a => a.CreatedDate)
        .Skip((page - 1) * size)
        .Take(size)
        .Select(a => new AnnouncementDto
        {
            Id = a.Id,
            Title = a.Title,
            Summary = a.Content.Substring(0, 100),
            CreatedDate = a.CreatedDate
        })
        .ToListAsync();
    
    return Ok(announcements);
}
```

### å¿«å–ç­–ç•¥å¯¦ä½œ
#### Redis å¿«å–é…ç½®
```csharp
// è¨˜æ†¶é«”å¿«å– + Redis å¿«å–
public class CacheService
{
    private readonly IMemoryCache _memoryCache;
    private readonly IConnectionMultiplexer _redis;
    
    public async Task<T> GetOrSetAsync<T>(string key, Func<Task<T>> factory, 
        TimeSpan expiration)
    {
        // å…ˆæŸ¥è¨˜æ†¶é«”å¿«å–
        if (_memoryCache.TryGetValue(key, out T value))
            return value;
        
        // å†æŸ¥ Redis å¿«å–
        var redisValue = await _redis.GetDatabase().StringGetAsync(key);
        if (redisValue.HasValue)
        {
            value = JsonSerializer.Deserialize<T>(redisValue);
            _memoryCache.Set(key, value, TimeSpan.FromMinutes(5));
            return value;
        }
        
        // æœ€å¾ŒæŸ¥è³‡æ–™åº«
        value = await factory();
        await _redis.GetDatabase().StringSetAsync(key, 
            JsonSerializer.Serialize(value), expiration);
        _memoryCache.Set(key, value, TimeSpan.FromMinutes(5));
        
        return value;
    }
}
```

## ğŸ”’ å®‰å…¨å¼·åŒ–å¯¦ä½œ

### HTTPS å’Œå®‰å…¨æ¨™é ­
```csharp
// Startup.cs å®‰å…¨é…ç½®
public void ConfigureServices(IServiceCollection services)
{
    services.AddHsts(options =>
    {
        options.Preload = true;
        options.IncludeSubDomains = true;
        options.MaxAge = TimeSpan.FromDays(365);
    });
    
    services.AddHttpsRedirection(options =>
    {
        options.RedirectStatusCode = StatusCodes.Status301MovedPermanently;
        options.HttpsPort = 443;
    });
}

public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    // å®‰å…¨æ¨™é ­
    app.Use(async (context, next) =>
    {
        context.Response.Headers.Add("X-Content-Type-Options", "nosniff");
        context.Response.Headers.Add("X-Frame-Options", "DENY");
        context.Response.Headers.Add("X-XSS-Protection", "1; mode=block");
        context.Response.Headers.Add("Referrer-Policy", "strict-origin-when-cross-origin");
        
        await next();
    });
    
    app.UseHsts();
    app.UseHttpsRedirection();
}
```

### è¼¸å…¥é©—è­‰å’Œæ¸…ç†
```csharp
// è‡ªè¨‚é©—è­‰å±¬æ€§
public class SafeHtmlAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        if (value is string html)
        {
            // ä½¿ç”¨ HtmlSanitizer æ¸…ç† HTML
            var sanitizer = new HtmlSanitizer();
            var cleanHtml = sanitizer.Sanitize(html);
            return cleanHtml == html;
        }
        return true;
    }
}

// æ¨¡å‹é©—è­‰
public class CreateAnnouncementDto
{
    [Required, MaxLength(200)]
    public string Title { get; set; }
    
    [Required, SafeHtml]
    public string Content { get; set; }
    
    [EmailAddress]
    public string ContactEmail { get; set; }
}
```

### æª”æ¡ˆä¸Šå‚³å®‰å…¨
```csharp
public class FileUploadService
{
    private readonly string[] _allowedExtensions = { ".jpg", ".jpeg", ".png", ".pdf", ".doc", ".docx" };
    private readonly long _maxFileSize = 10 * 1024 * 1024; // 10MB
    
    public async Task<bool> ValidateFileAsync(IFormFile file)
    {
        // æª”æ¡ˆå¤§å°æª¢æŸ¥
        if (file.Length > _maxFileSize)
            return false;
        
        // å‰¯æª”åæª¢æŸ¥
        var extension = Path.GetExtension(file.FileName).ToLowerInvariant();
        if (!_allowedExtensions.Contains(extension))
            return false;
        
        // MIME é¡å‹æª¢æŸ¥
        var mimeType = file.ContentType;
        if (!IsValidMimeType(mimeType, extension))
            return false;
        
        // æª”æ¡ˆç°½ç« æª¢æŸ¥
        using var stream = file.OpenReadStream();
        var header = new byte[8];
        await stream.ReadAsync(header, 0, 8);
        
        return IsValidFileSignature(header, extension);
    }
}
```

## ğŸ“Š ç›£æ§å’Œæ—¥èªŒå¯¦ä½œ

### Application Insights æ•´åˆ
```csharp
// Program.cs
builder.Services.AddApplicationInsightsTelemetry();

// è‡ªè¨‚è¿½è¹¤
public class ActivityService
{
    private readonly TelemetryClient _telemetryClient;
    
    public async Task RegisterForActivityAsync(int activityId, int userId)
    {
        var stopwatch = Stopwatch.StartNew();
        
        try
        {
            // æ¥­å‹™é‚è¼¯
            await DoRegistrationAsync(activityId, userId);
            
            // æˆåŠŸäº‹ä»¶è¿½è¹¤
            _telemetryClient.TrackEvent("ActivityRegistration", 
                new Dictionary<string, string>
                {
                    ["ActivityId"] = activityId.ToString(),
                    ["UserId"] = userId.ToString(),
                    ["Duration"] = stopwatch.ElapsedMilliseconds.ToString()
                });
        }
        catch (Exception ex)
        {
            // éŒ¯èª¤è¿½è¹¤
            _telemetryClient.TrackException(ex, 
                new Dictionary<string, string>
                {
                    ["ActivityId"] = activityId.ToString(),
                    ["UserId"] = userId.ToString()
                });
            throw;
        }
    }
}
```

### è‡ªè¨‚æ•ˆèƒ½ç›£æ§
```csharp
// æ•ˆèƒ½ç›£æ§ä¸­ä»‹è»Ÿé«”
public class PerformanceMonitoringMiddleware
{
    private readonly RequestDelegate _next;
    private readonly ILogger<PerformanceMonitoringMiddleware> _logger;
    
    public async Task InvokeAsync(HttpContext context)
    {
        var stopwatch = Stopwatch.StartNew();
        
        await _next(context);
        
        stopwatch.Stop();
        
        if (stopwatch.ElapsedMilliseconds > 1000) // è¶…é 1 ç§’çš„è«‹æ±‚
        {
            _logger.LogWarning("Slow request detected: {Method} {Path} took {ElapsedMilliseconds}ms",
                context.Request.Method,
                context.Request.Path,
                stopwatch.ElapsedMilliseconds);
        }
    }
}
```

## ğŸ§ª å„ªåŒ–æ•ˆæœé©—è­‰

### æ•ˆèƒ½åŸºæº–æ¸¬è©¦
- **å‰ç«¯è¼‰å…¥æ™‚é–“**: å„ªåŒ–å‰å¾Œå°æ¯”
- **API å›æ‡‰æ™‚é–“**: å¹³å‡å›æ‡‰æ™‚é–“æ”¹å–„
- **è³‡æ–™åº«æŸ¥è©¢**: æŸ¥è©¢åŸ·è¡Œæ™‚é–“æ¸›å°‘
- **è¨˜æ†¶é«”ä½¿ç”¨**: è¨˜æ†¶é«”ä½”ç”¨å„ªåŒ–
- **ä¸¦ç™¼è™•ç†**: åŒæ™‚è™•ç†èƒ½åŠ›æå‡

### å®‰å…¨æ€§é©—è­‰
- **æ¼æ´æƒæ**: OWASP ZAP æƒæçµæœ
- **æ»²é€æ¸¬è©¦**: æ¨¡æ“¬æ”»æ“Šæ¸¬è©¦
- **ç¨‹å¼ç¢¼å¯©æŸ¥**: éœæ…‹åˆ†æçµæœ
- **åˆè¦æª¢æŸ¥**: å®‰å…¨æ¨™æº–ç¬¦åˆåº¦

## ğŸ”— ç›¸é—œè³‡æº
- Web Performance æœ€ä½³å¯¦å‹™
- OWASP å®‰å…¨æŒ‡å—
- Application Insights æ–‡ä»¶
- Redis å¿«å–æœ€ä½³å¯¦å‹™

## ğŸ“‹ å¾ŒçºŒå·¥ä½œé …ç›®
- WI-013: éƒ¨ç½²æº–å‚™èˆ‡ä¸Šç·š
- WI-014: ä½¿ç”¨è€…åŸ¹è¨“èˆ‡æ–‡ä»¶

## ğŸ“ å‚™è¨»
- æ•ˆèƒ½å„ªåŒ–éœ€è¦åŸºæ–¼å¯¦éš›æ¸¬è©¦æ•¸æ“šé€²è¡Œ
- å®‰å…¨æªæ–½éœ€è¦å®šæœŸæ›´æ–°å’Œæª¢è¦–
- ç›£æ§ç³»çµ±éœ€è¦æŒçºŒèª¿æ•´å’Œå„ªåŒ–
- å»ºç«‹æ•ˆèƒ½å’Œå®‰å…¨çš„æŒçºŒæ”¹å–„æ©Ÿåˆ¶
